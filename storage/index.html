<div class="hint">
    <img class="hint-btn" src="assets/hint.png" alt="hint">
    <p>Hint</p>
</div>



hintBtn.addEventListener("click", () => {

    const hintBtn = document.querySelector(".hint-btn");

    let correctAns = questions[queCount].answer;
    const correctAnswerIndex = questions[queCount].options.indexOf(correctAns);
    const correctOption = optionList.children[correctAnswerIndex];
    correctOption.classList.add("correct");
    nextBtn.classList.add("show");
    const allOptions = optionList.children.length;
    for (let i = 0; i < allOptions; i++) {
        optionList.children[i].classList.add("disabled");
    }
});



function showResult() {
    fetch('/position')
        .then(response => {
            if (!response.ok) {
                throw new Error('Failed to fetch position data');
            }
            return response.json();
        })
        .then(data => {
            let positionNumber = data.position;
            let earnedCash = 0;
            console.log(earnedCash);
            let quizNum = parseInt(quizNumber);

            const scoreText = resultBox.querySelector(".score_text");
            const scoreText1 = resultBox.querySelector(".score_text");
            const scoreText2 = resultBox.querySelector(".score_text");
            const scoreText3 = resultBox.querySelector(".score_text");
            
let scoreTag1 = '<span>';
    let scoreTag = '<span>';
    let scoreTag2 = '<span>';
    let scoreTag3 = '<span>';

    if (userScore === 10) {
        earnedCash += 50;
        scoreTag1 += '&#11088;&#11088;&#11088;';
        scoreTag += 'Congrats! You got <p>' + userScore + '</p> out of <p>' + questions.length + '</p>. ';
        scoreTag2 += `You are awesome! &#128181; ${earnedCash} $`;
        checkQuizUpdate(parseInt(quizNumber),3);
        if (positionNumber%3 === 0) {
            scoreTag3 += 'ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž '
            updateDiamond(10);
        }
        if (positionNumber === quizNum) {
            updatePosition(parseInt(quizNumber) + 1);
            updateLevel(parseInt(quizNumber) + 1);
        }
        congratulations();
    } else if (userScore >= 8 && userScore <= 9) {
        earnedCash += 25;
        scoreTag1 += '&#11088;&#11088;';
        scoreTag += 'Nice, You got <p>' + userScore + '</p> out of <p>' + questions.length + '</p>. ';
        scoreTag2 += `Keep it up! &#128181; ${earnedCash} $`;
        checkQuizUpdate(parseInt(quizNumber),2);
        if (positionNumber%3 === 0) {
            scoreTag3 += 'ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž '
            updateDiamond(10);
        }
        if (positionNumber === quizNum) {
            updatePosition(parseInt(quizNumber) + 1);
            updateLevel(parseInt(quizNumber) + 1);
        }
        congratulations();
    } else if (userScore >= 5 && userScore <= 7) {
        earnedCash += 10;
        scoreTag1 += '&#11088;';
        scoreTag += 'Good, You got <p>' + userScore + '</p> out of <p>' + questions.length + '</p>. ';
        scoreTag2 += `Well done! &#128181; ${earnedCash} $`;
        checkQuizUpdate(parseInt(quizNumber),1);
        if (positionNumber%3 === 0) {
            scoreTag3 += 'ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž '
            updateDiamond(10);
        }
        if (positionNumber === quizNum) {
            updatePosition(parseInt(quizNumber) + 1);
            updateLevel(parseInt(quizNumber) + 1);
        }
        congratulations();
    } else if (userScore >= 1 && userScore <= 4) {
        scoreTag1 += '&#128557;&#128557;&#128557;';
        scoreTag += 'Sorry, You got only <p>' + userScore + '</p> out of <p>' + questions.length + '</p>. ';
        scoreTag2 += 'You can do better! &#128546;';
        const audio = new Audio('assets/fail.mp3');
        audio.play();
        const nextButton = resultBox.querySelector(".next_quiz");
        nextButton.style.display = "none";
    }
    scoreTag3 += '</span>';
    scoreTag1 += '</span>';
    scoreTag += '</span>';
    scoreTag2 += '</span>';
    scoreText1.innerHTML = scoreTag1;
    scoreText.innerHTML = scoreTag;
    scoreText2.innerHTML = scoreTag2;
    scoreText3.innerHTML = scoreTag3;

    const circularProgress = document.querySelector('.circular-progress');
    const progressValue = document.querySelector('.progress-value');
    
        // Calculate progress values
        let progressStartValue = 0;
        let progressEndValue = (userScore / questions.length) * 100;
        let speed = 20;
    
    // Update progress value continuously
    let progress = setInterval(() => {
        progressStartValue++;
        progressValue.textContent = `${progressStartValue}%`;
        const angle = (progressStartValue / 100) * 360; // Calculate angle in degrees
        circularProgress.style.background = `conic-gradient(#007bff ${angle}deg, rgba(255,255,255,.1) ${angle}deg)`;
    
        // Stop when reaching the end value
        if (progressStartValue >= progressEndValue) {
            clearInterval(progress);
        }
    }, speed);

    // Send updated cash to the server
    fetch('/updateCash', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ newCash: earnedCash })
    })
        .then(response => {
            if (!response.ok) {
                throw new Error('Failed to update cash data');
            }
            console.log('Cash data updated successfully');
        })
        .catch(error => console.error('Error updating cash data:', error));
})
.catch(error => console.error('Error fetching position data:', error));
